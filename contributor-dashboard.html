<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributor Dashboard</title>
  <link rel="stylesheet" href="styles/contributor.css" />
</head>
<body>
  <header>
    <h1>ğŸ§‘â€ğŸ’¼ Contributor Dashboard</h1>
    <p>Empowering collaborators with clarity, role-based access, and branded onboarding.</p>
  </header>

  <main>
    <section id="contributor-list">
      <h2>ğŸ‘¥ Contributor List</h2>
      <div id="contributors"></div>
    </section>

    <section id="role-manager" style="display:none;">
      <h2>ğŸ” Role Manager</h2>
      <div id="role-controls"></div>
    </section>

    <section id="onboarding-tracker">
      <h2>ğŸš€ Onboarding Tracker</h2>
      <ul id="onboarding-checklist"></ul>
    </section>

    <section id="permissions-matrix">
      <h2>ğŸ“Š Permissions Matrix</h2>
      <table id="matrix-table"></table>
    </section>

    <section id="profile-editor">
      <h2>ğŸ“ Profile Editor</h2>
      <form id="profile-form">
        <input type="text" id="name" placeholder="Name" />
        <input type="text" id="role" placeholder="Role" />
        <textarea id="bio" placeholder="Bio"></textarea>
        <button type="submit">Save Profile</button>
      </form>
    </section>

    <section id="activity-log">
      <h2>ğŸ“œ Activity Log</h2>
      <div id="log-entries"></div>
    </section>
  </main>

  <script>
const contributors = [
  { name: "Landers", role: "Admin", joined: "2025-10-01", status: "Active" },
  { name: "Avery", role: "Editor", joined: "2025-10-15", status: "Onboarding" },
];

const permissions = {
  Admin: ["Edit", "Delete", "Assign Roles"],
  Editor: ["Edit", "Comment"],
  Viewer: ["View"]
};

function getCurrentUserRole() {
  return "Admin"; // Replace with session logic
}

function renderContributors() {
  const container = document.getElementById("contributors");
  container.innerHTML = contributors.map(c =>
    `<div class="contributor-card">
      <strong>${c.name}</strong> (${c.role}) â€” ${c.status}
    </div>`
  ).join("");
}

function setupRoleManager() {
  const container = document.getElementById("role-controls");
  container.innerHTML = `<p>Role assignment tools coming soon.</p>`;
}

function renderOnboardingChecklist() {
  const checklist = [
    "âœ… Review Cash Flow Tracker",
    "âœ… Set Profile",
    "ğŸ”² Read Branding Guide"
  ];
  document.getElementById("onboarding-checklist").innerHTML = checklist.map(item =>
    `<li>${item}</li>`
  ).join("");
}

function renderPermissionsMatrix() {
  const table = document.getElementById("matrix-table");
  const roles = Object.keys(permissions);
  const actions = [...new Set(roles.flatMap(role => permissions[role]))];

  let html = `<tr><th>Role</th>${actions.map(a => `<th>${a}</th>`).join("")}</tr>`;
  roles.forEach(role => {
    html += `<tr><td>${role}</td>${actions.map(a =>
      `<td>${permissions[role].includes(a) ? "âœ…" : "âŒ"}</td>`).join("")}</tr>`;
  });
  table.innerHTML = html;
}

function logActivity(message) {
  const log = document.getElementById("log-entries");
  const entry = document.createElement("div");
  entry.textContent = `${new Date().toLocaleString()}: ${message}`;
  log.appendChild(entry);
}

document.getElementById("profile-form").addEventListener("submit", function(e) {
  e.preventDefault();
  const name = document.getElementById("name").value;
  const role = document.getElementById("role").value;
  const bio = document.getElementById("bio").value;
  logActivity(`Profile updated for ${name} (${role})`);
});

function showAdminTools() {
  if (getCurrentUserRole() === "Admin") {
    document.getElementById("role-manager").style.display = "block";
  }
}

// Initialize dashboard
renderContributors();
setupRoleManager();
renderOnboardingChecklist();
renderPermissionsMatrix();
showAdminTools();
</script>
</body>
</html>