<!-- cash-flow.html -->
<html>
<head>
  <title>Personal Cash Flow Report</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    table { border-collapse: collapse; width: 60%; margin-bottom: 2em; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f0f0f0; }
  </style>
</head>
<body>
  <h1>Cash Flow Report</h1>
  <div id="report"></div>

  <script>
    async function generateCashFlowReport() {
      const response = await fetch('journal.html');
      const html = await response.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      const rows = doc.querySelectorAll('#journal tbody tr');

      let inflow = 0, outflow = 0;
      const details = [];

      rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const date = cells[0].textContent.trim();
        const account = cells[1].textContent.trim();
        const type = cells[2].textContent.trim();
        const amount = parseFloat(cells[3].textContent.trim());
        const direction = cells[4].textContent.trim();

        if (direction === 'Inflow') inflow += amount;
        else if (direction === 'Outflow') outflow += amount;

        details.push({ date, account, type, amount, direction });
      });

      const netFlow = inflow - outflow;

      document.getElementById('report').innerHTML = `
        <table>
          <tr><th>Category</th><th>Amount</th></tr>
          <tr><td>Total Inflows</td><td>

{inflow.toFixed(2)}</td></tr>
          <tr><td>Total Outflows</td><td>

{outflow.toFixed(2)}</td></tr>
          <tr><td>Net Cash Flow</td><td>$${netFlow.toFixed(2)}</td></tr>
        </table>
        <h2>Transaction Details</h2>
        <table>
          <tr><th>Date</th><th>Account</th><th>Type</th><th>Amount</th><th>Direction</th></tr>
          ${details.map(d => `
            <tr>
              <td>${d.date}</td><td>${d.account}</td><td>${d.type}</td>
              <td>$${d.amount.toFixed(2)}</td><td>${d.direction}</td>
            </tr>`).join('')}
        </table>