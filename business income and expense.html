<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Business Income & Expense Report</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    h1 { color: #2c3e50; }
    select { margin-top: 1em; padding: 0.5em; font-size: 1em; margin-right: 1em; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f0f0f0; }
    .income { color: green; }
    .expense { color: red; }
    .summary { margin-top: 1em; font-size: 1.2em; }
    .right-align { text-align: right; }
  </style>
</head>
<body>
  <h1>Business Income & Expense Report</h1>

  <!-- Selectors -->
  <label for="companySelect">Select Company:</label>
  <select id="companySelect">
    <option value="acme">Acme Corp</option>
    <option value="zenith">Zenith LLC</option>
    <option value="nova">Nova Industries</option>
  </select>

  <label for="timeRangeSelect">Select Time Range:</label>
  <select id="timeRangeSelect">
    <option value="monthly">Monthly</option>
    <option value="quarterly">Quarterly</option>
    <option value="annual">Annual</option>
  </select>

  <!-- Company Header -->
  <div class="company-header" role="region" aria-label="Company Summary">
    <h2 id="headerCompanyName">Company Name</h2>
    <p id="headerLocation">City, State</p>
    <p id="headerType">Type: <span></span></p>
    <p id="headerRole">Role: <span></span></p>
  </div>

  <div class="summary" id="summary"></div>
  <table id="report">
    <thead>
      <tr>
        <th>Category</th>
        <th>Type</th>
        <th>Amount</th>
        <th class="right-align" id="expenseTotalHeader"></th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const companyMeta = {
      acme: { name: "Acme Corp", location: "New York, NY", type: "Manufacturing", role: "Owner" },
      zenith: { name: "Zenith LLC", location: "Austin, TX", type: "Consulting", role: "Partner" },
      nova: { name: "Nova Industries", location: "San Francisco, CA", type: "Tech Startup", role: "Investor" }
    };

    const companyData = {
      acme: [
        { category: "Product Sales", type: "Income", amount: 120000, date: "2025-01-15" },
        { category: "Service Revenue", type: "Income", amount: 30000, date: "2025-03-10" },
        { category: "Rent", type: "Expense", amount: 15000, date: "2025-01-01" },
        { category: "Salaries", type: "Expense", amount: 40000, date: "2025-03-01" }
      ],
      zenith: [
        { category: "Consulting Fees", type: "Income", amount: 80000, date: "2025-04-01" },
        { category: "Training Services", type: "Income", amount: 20000, date: "2025-04-15" },
        { category: "Marketing", type: "Expense", amount: 10000, date: "2025-04-10" },
        { category: "Travel", type: "Expense", amount: 5000, date: "2025-04-20" }
      ],
      nova: [
        { category: "App Subscriptions", type: "Income", amount: 50000, date: "2025-07-01" },
        { category: "Ad Revenue", type: "Income", amount: 15000, date: "2025-07-15" },
        { category: "Cloud Hosting", type: "Expense", amount: 8000, date: "2025-07-10" },
        { category: "Developer Salaries", type: "Expense", amount: 25000, date: "2025-07-20" }
      ]
    };

    function loadReport(companyKey) {
      const meta = companyMeta[companyKey];
      const data = companyData[companyKey];
      const timeRange = document.getElementById('timeRangeSelect').value;

      document.getElementById('headerCompanyName').textContent = meta.name;
      document.getElementById('headerLocation').textContent = meta.location;
      document.querySelector('#headerType span').textContent = meta.type;
      document.querySelector('#headerRole span').textContent = meta.role;

      const tbody = document.querySelector('#report tbody');
      tbody.innerHTML = '';

      const now = new Date();
      const filteredData = data.filter(entry => {
        const entryDate = new Date(entry.date);
        if (timeRange === "monthly") {
          return entryDate.getMonth() === now.getMonth() && entryDate.getFullYear() === now.getFullYear();
        } else if (timeRange === "quarterly") {
          const currentQuarter = Math.floor(now.getMonth() / 3);
          const entryQuarter = Math.floor(entryDate.getMonth() / 3);
          return entryQuarter === currentQuarter && entryDate.getFullYear() === now.getFullYear();
        } else {
          return entryDate.getFullYear() === now.getFullYear();
        }
      });

      let totalIncome = 0;
      let totalExpense = 0;
      const expenseSubtotals = {};

      filteredData.forEach(entry => {
        if (entry.type === "Income") totalIncome += entry.amount;
        else if (entry.type === "Expense") {
          totalExpense += entry.amount;
          expenseSubtotals[entry.category] = (expenseSubtotals[entry.category] || 0) + entry.amount;
        }
      });

      filteredData.forEach(entry => {
        const row = document.createElement('tr');
        const subtotal = entry.type === "Expense" ? expenseSubtotals[entry.category].toFixed(2) : '';
        row.innerHTML = `
          <td>${entry.category}</td>
          <td>${entry.type}</td>
          <td class="${entry.type.toLowerCase()}">${entry.amount.toFixed(2)}</td>
          <td class="right-align">${subtotal}</td>
        `;
        tbody.appendChild(row);
      });

      document.getElementById('expenseTotalHeader').textContent = `Total Expenses: ${totalExpense.toFixed(2)}`;

      const net = totalIncome - totalExpense;
      document.getElementById('summary').innerHTML = `
        <p><strong>Total Income:</strong> <span class="income">${totalIncome.toFixed(2)}</span></p>
        <p><strong>Total Expenses:</strong> <span class="expense">${totalExpense.toFixed(2)}</span></p>
        <p><strong>Net Total:</strong> <strong>${net.toFixed(2)}</strong></p>
      `;
    }

    document.getElementById('companySelect').addEventListener('change', () => {
      loadReport(document.getElementById('companySelect').value);
    });

    document.getElementById('timeRangeSelect').addEventListener('change', () => {
      loadReport(document.getElementById('companySelect').value);
    });

    loadReport(document.getElementById('companySelect').value);
  </script>
</body>
</html>